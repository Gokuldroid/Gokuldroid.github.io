{"componentChunkName":"component---src-components-module-blog-post-index-jsx","path":"/posts/null-vs-empty","result":{"data":{"post":{"html":"<img src=\"/assets/blog/null-vs-empty/null-vs-empty-cover.jpeg\" alt=\"null vs empty\" style=\"width:100%\">\n<br/>\n<br/>\n<p>I tried to book a ticket in <a href=\"https://www.irctc.co.in\">irctc</a>. while giving CCV of my debit card <strong>(*mandatory field)</strong>, accidentally I gave empty value and proceeded to book a ticket. It threw an error after refreshing the whole page as the validation happened (or something went wrong) in the backend. they might have handled in frontend itself. Because of this, I lost my booking window. They might handle millions of requests per day. but they simply failed at this. </p>\n<blockquote>\n<p>It should be a common-sense for a developer to handle null vs empty. To\nerr is human. but repeating history is not acceptable.</p>\n</blockquote>\n<p>I've used a good number of programming languages (Typescript, Java, Kotlin, Ruby, Javascript, Python, C++, C, PHP). There are days I assumed the user is not dumb enough to give empty values for username or password. I haven't developed a real-world software back then. Handling null and empty is always an art. Some programming languages are good at that. Some of them shout like Kotlin <strong>'Yes! we support null safety in our language'</strong>. I am not going to give you the definition of null or empty. Do some research and fight with your colleagues about null vs Empty. You will hear some interesting story. I will throw some snippets from the languages I've used so far. Different languages handle them slightly differently. You will get a better understanding of null vs Empty argument once you know about it.</p>\n<p>Let's take java first,</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">demo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span>  \n\t<span class=\"token keyword\">int</span> countInner<span class=\"token punctuation\">;</span>  \n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>countInner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>This one won't compile. It will throw an error, saying variable not initialized. Let's deceive the complier.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> countInner<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">demo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>countInner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>Yey!! it got complied. What will be the output of this? Can you guess?.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">null</span>  \n<span class=\"token number\">0</span></code></pre></div>\n<br/>\n<p>Why the compiler let us compile successfully this time?. When that is a local variable compiler will know for sure that is not yet assigned to any value. we can assign values outside of this method, so there is a possibility of non-empty value inside this function. Thus java compiler won't prevent us from compiling. What if we didn't assign any values to these variables and use these variables like this,</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Integer</span> count<span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>Oops! Here comes the NullPointerException. Now you have some idea about null problem right?.</p>\n<p>Let's move on to Empty,</p>\n<p>There is a slight difference between no password was given and an empty password. Take a look at this snippet.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">validPassword</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token keyword\">return</span> password <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>  \n  \n<span class=\"token keyword\">function</span> <span class=\"token function\">validPassword2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token keyword\">return</span> password <span class=\"token operator\">!=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>  \n  \n<span class=\"token keyword\">function</span> <span class=\"token function\">validPassword3</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">password</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n\t<span class=\"token keyword\">return</span> password <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>  \n  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">validPassword</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">validPassword</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">validPassword2</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">validPassword2</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">validPassword3</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">validPassword3</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>the output of this will be,</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token boolean\">true</span>  \n<span class=\"token boolean\">false</span>  \n<span class=\"token boolean\">true</span>  \n<span class=\"token boolean\">false</span>  \n<span class=\"token boolean\">true</span>  \n<span class=\"token boolean\">true</span></code></pre></div>\n<br/>\n<p>To get a better understanding of this, take a look at this javascript truth table. What if your password validation just checks against null or undefined, you will be allowing the user to have an empty password.</p>\n<h5>For, == comparison</h5>\n<br/>\n<img src=\"/assets/blog/null-vs-empty/truth-table-double-eq.png\" alt=\"javascript comparison table\" style=\"width:100%\">\n<br/>\n<br/>\n<h5>For, === comparison</h5>\n<br/>\n<img src=\"/assets/blog/null-vs-empty/truth-table-triple-eq.png\" alt=\"javascript comparison table\" style=\"width:100%\">\n<p>weird isn't it?. (Javascript is always weird ;-))</p>\n<p>Some programming languages provide safety against some of these issues.</p>\n<br/>\n<h5>In Java,</h5>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@NonNull</span>  \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">longToIp</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">Long</span> ip<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ip <span class=\"token operator\">>></span> <span class=\"token number\">24</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span>  \n\t\t  <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ip <span class=\"token operator\">>></span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span>  \n\t\t  <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ip <span class=\"token operator\">>></span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span>  \n\t\t  <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>ip <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But you need to configure tools like FindBugs to get errors and warnings, Can't be better than this?. In some languages null safety is tied into the language itself. thus provides better support for null safety.</p>\n<br/>\n<h5>In Kotlin,</h5>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">var</span> a<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string\">\"abc\"</span>  \na <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">// compilation error</span></code></pre></div>\n<p>More details about <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\">kotlin null safety</a>, </p>\n<br/>\n<h5>In typescript (Javascript with types),</h5>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>  \nname <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// compilation error</span></code></pre></div>\n<p>More details about <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html\">typescript null safety</a></p>\n<p>Did you notice something?. No one provides safety against empty values. Because of this, a lot of frameworks and libraries have utils to check empty value.</p>\n<ul>\n<li><a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/base/Strings.html\">Guava</a></li>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html\">Apache</a></li>\n<li><a href=\"http://api.emberjs.com/ember/3.10/functions/@ember%2Futils/isEmpty\">Ember</a></li>\n<li><a href=\"https://lodash.com/docs/4.17.15#isEmpty\">Lodash</a></li>\n</ul>\n<p>While writing code, keep asking one thing, <strong>\"Should I handle empty state?\"</strong>. Handling null and empty state everywhere is also bad. As a rule of thumb, Don't use optional values in the place of mandatory values. If we strictly need a value, throw an error early on, if it null. Please keep this in mind <strong>'there might be a stupid person like me who never reads the instructions'</strong>.</p>\n<p><strong>\"Should a function return null or empty?\"</strong>  is a whole new argument, let's save that for another day.</p>","excerpt":"I tried to book a ticket in irctc. while giving CCV of my debit card (*mandatory field), accidentally I gave empty value and proceeded toâ€¦","frontmatter":{"title":"NULL vs Empty","tags":["NULL","empty","programming"]}},"previousPost":{"frontmatter":{"title":"A missing cmdline util for GIT - NIT"}},"nextPost":{"frontmatter":{"title":"Java internals : part - 1"}}},"pageContext":{"pageId":"ad16b7ed-e6fe-5c8f-a8ab-13226ec108e1","previousPagePath":"/posts/git-cmdline-util","previousItem":{"node":{"id":"78ecf9b8-87d2-5d5b-9d47-9d4cab5572ff","frontmatter":{"title":"A missing cmdline util for GIT - NIT","path":"git-cmdline-util","date":"2020-01-18T07:52:06.942Z","categories":["tools","cmdline"]}}},"previousPageId":"78ecf9b8-87d2-5d5b-9d47-9d4cab5572ff","nextPagePath":"/posts/java-internals-1","nextItem":{"node":{"id":"d6e09b3e-9e2c-5d0f-aafa-0bb556bf1f90","frontmatter":{"title":"Java internals : part - 1","path":"java-internals-1","date":"2019-06-17T18:21:41.620Z","categories":["java"]}}},"nextPageId":"d6e09b3e-9e2c-5d0f-aafa-0bb556bf1f90"}}}